<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Integration - EcoGlow Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Zappar Universal AR SDK -->
    <script src="https://libs.zappar.com/zappar-js/1.1.8/zappar.js"></script>
    <style>
        .eco-green { color: #228B22; }
        .eco-bg-green { background-color: #228B22; }
        .ar-preview { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .model-card { transition: all 0.3s ease; }
        .model-card:hover { transform: translateY(-4px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .upload-zone { 
            border: 2px dashed #cbd5e0;
            transition: all 0.3s ease;
        }
        .upload-zone:hover { border-color: #228B22; background-color: #f0f9ff; }
        .upload-zone.dragover { border-color: #228B22; background-color: #dcfce7; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="ar-integration-app"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // 3D Model Manager Component
        const ModelManager = () => {
            const [models, setModels] = useState([
                {
                    id: 1,
                    name: 'Beet Tinted Balm - Rose',
                    category: 'Lip Products',
                    productId: 'PRD-002',
                    modelFile: 'lipstick_rose.glb',
                    textureFiles: ['rose_texture.jpg', 'rose_normal.jpg'],
                    status: 'Active',
                    uploadDate: '2025-01-15',
                    fileSize: '2.4 MB',
                    sessions: 156,
                    conversions: 23,
                    conversionRate: 14.7
                },
                {
                    id: 2,
                    name: 'Beet Tinted Balm - Berry',
                    category: 'Lip Products',
                    productId: 'PRD-002',
                    modelFile: 'lipstick_berry.glb',
                    textureFiles: ['berry_texture.jpg', 'berry_normal.jpg'],
                    status: 'Active',
                    uploadDate: '2025-01-14',
                    fileSize: '2.2 MB',
                    sessions: 203,
                    conversions: 31,
                    conversionRate: 15.3
                },
                {
                    id: 3,
                    name: 'Natural Blush - Coral',
                    category: 'Face Makeup',
                    productId: 'PRD-005',
                    modelFile: 'blush_coral.glb',
                    textureFiles: ['coral_texture.jpg'],
                    status: 'Draft',
                    uploadDate: '2025-01-16',
                    fileSize: '1.8 MB',
                    sessions: 0,
                    conversions: 0,
                    conversionRate: 0
                }
            ]);

            const [showUpload, setShowUpload] = useState(false);
            const [uploadProgress, setUploadProgress] = useState(0);
            const [dragOver, setDragOver] = useState(false);

            const fileInputRef = useRef(null);

            const handleDragOver = (e) => {
                e.preventDefault();
                setDragOver(true);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                setDragOver(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                setDragOver(false);
                const files = Array.from(e.dataTransfer.files);
                handleFileUpload(files);
            };

            const handleFileSelect = (e) => {
                const files = Array.from(e.target.files);
                handleFileUpload(files);
            };

            const handleFileUpload = (files) => {
                // Simulate file upload process
                setUploadProgress(0);
                const interval = setInterval(() => {
                    setUploadProgress(prev => {
                        if (prev >= 100) {
                            clearInterval(interval);
                            setTimeout(() => {
                                setShowUpload(false);
                                setUploadProgress(0);
                                // Add new model to list
                                const newModel = {
                                    id: Date.now(),
                                    name: 'New AR Model',
                                    category: 'Lip Products',
                                    productId: 'PRD-NEW',
                                    modelFile: files[0]?.name || 'new_model.glb',
                                    textureFiles: files.slice(1).map(f => f.name),
                                    status: 'Processing',
                                    uploadDate: new Date().toISOString().split('T')[0],
                                    fileSize: '2.1 MB',
                                    sessions: 0,
                                    conversions: 0,
                                    conversionRate: 0
                                };
                                setModels(prev => [...prev, newModel]);
                            }, 1000);
                            return 100;
                        }
                        return prev + 10;
                    });
                }, 200);
            };

            const deleteModel = (modelId) => {
                if (confirm('Are you sure you want to delete this AR model?')) {
                    setModels(prev => prev.filter(m => m.id !== modelId));
                }
            };

            const toggleStatus = (modelId) => {
                setModels(prev => prev.map(model => 
                    model.id === modelId 
                        ? { ...model, status: model.status === 'Active' ? 'Draft' : 'Active' }
                        : model
                ));
            };

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-sm p-6">
                        <div className="flex justify-between items-center mb-6">
                            <div>
                                <h3 className="text-xl font-semibold text-gray-800 mb-2">3D Model Management</h3>
                                <p className="text-gray-600">Manage AR models for virtual try-on experiences</p>
                            </div>
                            <button 
                                onClick={() => setShowUpload(true)}
                                className="eco-bg-green text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors"
                            >
                                <i className="fas fa-upload mr-2"></i>Upload Model
                            </button>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {models.map(model => (
                                <div key={model.id} className="border border-gray-200 rounded-lg overflow-hidden model-card">
                                    <div className="ar-preview text-white text-center">
                                        <div>
                                            <i className="fas fa-cube text-4xl mb-2"></i>
                                            <p className="text-sm">3D Model Preview</p>
                                        </div>
                                    </div>
                                    
                                    <div className="p-4">
                                        <div className="flex justify-between items-start mb-3">
                                            <div>
                                                <h4 className="font-semibold text-gray-800">{model.name}</h4>
                                                <p className="text-sm text-gray-600">{model.category}</p>
                                            </div>
                                            <span className={`px-2 py-1 text-xs rounded-full ${
                                                model.status === 'Active' ? 'bg-green-100 text-green-800' :
                                                model.status === 'Processing' ? 'bg-yellow-100 text-yellow-800' :
                                                'bg-gray-100 text-gray-800'
                                            }`}>
                                                {model.status}
                                            </span>
                                        </div>
                                        
                                        <div className="space-y-2 text-sm text-gray-600 mb-4">
                                            <div className="flex justify-between">
                                                <span>Product ID:</span>
                                                <span>{model.productId}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span>File Size:</span>
                                                <span>{model.fileSize}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span>AR Sessions:</span>
                                                <span>{model.sessions}</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span>Conversion Rate:</span>
                                                <span className={model.conversionRate > 0 ? 'text-green-600 font-medium' : ''}>
                                                    {model.conversionRate}%
                                                </span>
                                            </div>
                                        </div>
                                        
                                        <div className="flex justify-between items-center">
                                            <div className="flex space-x-2">
                                                <button 
                                                    onClick={() => toggleStatus(model.id)}
                                                    className={`text-sm px-3 py-1 rounded ${
                                                        model.status === 'Active' 
                                                            ? 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200' 
                                                            : 'bg-green-100 text-green-800 hover:bg-green-200'
                                                    }`}
                                                >
                                                    {model.status === 'Active' ? 'Deactivate' : 'Activate'}
                                                </button>
                                                <button className="text-blue-600 hover:text-blue-800">
                                                    <i className="fas fa-eye"></i>
                                                </button>
                                                <button className="text-blue-600 hover:text-blue-800">
                                                    <i className="fas fa-edit"></i>
                                                </button>
                                            </div>
                                            <button 
                                                onClick={() => deleteModel(model.id)}
                                                className="text-red-600 hover:text-red-800"
                                            >
                                                <i className="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Upload Modal */}
                    {showUpload && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-lg max-w-2xl w-full">
                                <div className="p-6 border-b border-gray-200">
                                    <div className="flex justify-between items-center">
                                        <h3 className="text-xl font-semibold text-gray-800">Upload 3D Model</h3>
                                        <button 
                                            onClick={() => setShowUpload(false)}
                                            className="text-gray-400 hover:text-gray-600"
                                        >
                                            <i className="fas fa-times text-xl"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="p-6">
                                    {uploadProgress === 0 ? (
                                        <div 
                                            className={`upload-zone rounded-lg p-8 text-center ${dragOver ? 'dragover' : ''}`}
                                            onDragOver={handleDragOver}
                                            onDragLeave={handleDragLeave}
                                            onDrop={handleDrop}
                                        >
                                            <i className="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                            <p className="text-gray-600 mb-2">Drag & drop your 3D model files here</p>
                                            <p className="text-sm text-gray-500 mb-4">
                                                Supports: GLB, GLTF, OBJ + MTL (Max 10MB per file)
                                            </p>
                                            <input 
                                                ref={fileInputRef}
                                                type="file" 
                                                multiple 
                                                accept=".glb,.gltf,.obj,.mtl,.jpg,.png,.jpeg"
                                                onChange={handleFileSelect}
                                                className="hidden"
                                            />
                                            <button 
                                                onClick={() => fileInputRef.current?.click()}
                                                className="eco-bg-green text-white px-6 py-2 rounded-lg hover:bg-green-700"
                                            >
                                                Choose Files
                                            </button>
                                        </div>
                                    ) : (
                                        <div>
                                            <div className="mb-4">
                                                <div className="flex justify-between text-sm text-gray-600 mb-2">
                                                    <span>Uploading...</span>
                                                    <span>{uploadProgress}%</span>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-2">
                                                    <div 
                                                        className="eco-bg-green h-2 rounded-full transition-all duration-300"
                                                        style={{width: `${uploadProgress}%`}}
                                                    ></div>
                                                </div>
                                            </div>
                                            <p className="text-center text-gray-600">
                                                Processing 3D model and textures...
                                            </p>
                                        </div>
                                    )}
                                    
                                    <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                                        <h4 className="font-medium text-blue-800 mb-2">Upload Guidelines</h4>
                                        <ul className="text-blue-700 text-sm space-y-1">
                                            <li>• Use GLB format for best performance</li>
                                            <li>• Keep models under 5MB for mobile compatibility</li>
                                            <li>• Include diffuse, normal, and roughness textures</li>
                                            <li>• Optimize polygon count (under 10K triangles)</li>
                                            <li>• Test on multiple devices before activation</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // AR Preview Component
        const ARPreview = () => {
            const videoRef = useRef(null);
            const canvasRef = useRef(null);
            const [isLoading, setIsLoading] = useState(false);
            const [selectedModel, setSelectedModel] = useState('lipstick_rose.glb');
            const [cameraActive, setCameraActive] = useState(false);
            const [error, setError] = useState(null);

            const models = [
                { id: 'lipstick_rose.glb', name: 'Beet Tinted Balm - Rose', category: 'Lip Products' },
                { id: 'lipstick_berry.glb', name: 'Beet Tinted Balm - Berry', category: 'Lip Products' },
                { id: 'blush_coral.glb', name: 'Natural Blush - Coral', category: 'Face Makeup' }
            ];

            const startCamera = async () => {
                setIsLoading(true);
                setError(null);
                
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { facingMode: 'user' } 
                    });
                    
                    if (videoRef.current) {
                        videoRef.current.srcObject = stream;
                        setCameraActive(true);
                    }
                } catch (err) {
                    setError('Camera access denied or not available. Please check permissions.');
                    console.error('Camera error:', err);
                } finally {
                    setIsLoading(false);
                }
            };

            const stopCamera = () => {
                if (videoRef.current && videoRef.current.srcObject) {
                    const tracks = videoRef.current.srcObject.getTracks();
                    tracks.forEach(track => track.stop());
                    videoRef.current.srcObject = null;
                }
                setCameraActive(false);
            };

            const capturePhoto = () => {
                if (videoRef.current && canvasRef.current) {
                    const canvas = canvasRef.current;
                    const video = videoRef.current;
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    
                    // Convert to blob and download
                    canvas.toBlob((blob) => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `ar-try-on-${Date.now()}.jpg`;
                        a.click();
                        URL.revokeObjectURL(url);
                    });
                }
            };

            useEffect(() => {
                return () => {
                    stopCamera();
                };
            }, []);

            return (
                <div className="bg-white rounded-lg shadow-sm p-6">
                    <div className="mb-6">
                        <h3 className="text-xl font-semibold text-gray-800 mb-2">AR Preview & Testing</h3>
                        <p className="text-gray-600">Test your AR models with live camera preview</p>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        {/* Model Selection */}
                        <div>
                            <h4 className="font-medium text-gray-800 mb-4">Select Model</h4>
                            <div className="space-y-3">
                                {models.map(model => (
                                    <div 
                                        key={model.id}
                                        className={`p-3 border rounded-lg cursor-pointer transition-all ${
                                            selectedModel === model.id 
                                                ? 'border-green-500 bg-green-50' 
                                                : 'border-gray-200 hover:border-gray-300'
                                        }`}
                                        onClick={() => setSelectedModel(model.id)}
                                    >
                                        <div className="flex items-center">
                                            <div className={`w-4 h-4 rounded-full border-2 mr-3 ${
                                                selectedModel === model.id 
                                                    ? 'border-green-500 bg-green-500' 
                                                    : 'border-gray-300'
                                            }`}>
                                                {selectedModel === model.id && (
                                                    <div className="w-2 h-2 bg-white rounded-full m-0.5"></div>
                                                )}
                                            </div>
                                            <div>
                                                <p className="font-medium text-gray-800">{model.name}</p>
                                                <p className="text-sm text-gray-600">{model.category}</p>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <div className="mt-6 p-4 bg-gray-50 rounded-lg">
                                <h5 className="font-medium text-gray-800 mb-2">Controls</h5>
                                <div className="space-y-2">
                                    {!cameraActive ? (
                                        <button 
                                            onClick={startCamera}
                                            disabled={isLoading}
                                            className="w-full eco-bg-green text-white py-2 rounded-lg hover:bg-green-700 disabled:opacity-50"
                                        >
                                            {isLoading ? (
                                                <>
                                                    <i className="fas fa-spinner fa-spin mr-2"></i>Starting Camera...
                                                </>
                                            ) : (
                                                <>
                                                    <i className="fas fa-camera mr-2"></i>Start Camera
                                                </>
                                            )}
                                        </button>
                                    ) : (
                                        <>
                                            <button 
                                                onClick={capturePhoto}
                                                className="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700"
                                            >
                                                <i className="fas fa-camera mr-2"></i>Capture Photo
                                            </button>
                                            <button 
                                                onClick={stopCamera}
                                                className="w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700"
                                            >
                                                <i className="fas fa-stop mr-2"></i>Stop Camera
                                            </button>
                                        </>
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* AR Preview */}
                        <div className="lg:col-span-2">
                            <h4 className="font-medium text-gray-800 mb-4">Live Preview</h4>
                            <div className="relative bg-gray-900 rounded-lg overflow-hidden aspect-video">
                                {error ? (
                                    <div className="absolute inset-0 flex items-center justify-center text-white text-center p-4">
                                        <div>
                                            <i className="fas fa-exclamation-triangle text-4xl mb-4 text-red-400"></i>
                                            <p className="text-red-400 mb-2">Camera Error</p>
                                            <p className="text-sm text-gray-400">{error}</p>
                                        </div>
                                    </div>
                                ) : cameraActive ? (
                                    <>
                                        <video 
                                            ref={videoRef}
                                            autoPlay 
                                            playsInline 
                                            muted
                                            className="w-full h-full object-cover"
                                        />
                                        <div className="absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm">
                                            <i className="fas fa-circle text-red-500 mr-2"></i>Live
                                        </div>
                                        <div className="absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm">
                                            {models.find(m => m.id === selectedModel)?.name}
                                        </div>
                                        
                                        {/* AR Overlay Simulation */}
                                        <div className="absolute bottom-1/3 left-1/2 transform -translate-x-1/2">
                                            <div className="w-16 h-8 bg-pink-400 bg-opacity-70 rounded-full"></div>
                                            <div className="text-white text-xs text-center mt-1">AR Model</div>
                                        </div>
                                    </>
                                ) : (
                                    <div className="absolute inset-0 flex items-center justify-center text-white text-center">
                                        <div>
                                            <i className="fas fa-camera text-4xl mb-4"></i>
                                            <p className="text-lg mb-2">AR Camera Preview</p>
                                            <p className="text-sm text-gray-400">Click "Start Camera" to begin testing</p>
                                        </div>
                                    </div>
                                )}
                                
                                <canvas ref={canvasRef} className="hidden" />
                            </div>

                            <div className="mt-4 p-4 bg-yellow-50 rounded-lg">
                                <h5 className="font-medium text-yellow-800 mb-2">Testing Notes</h5>
                                <ul className="text-yellow-700 text-sm space-y-1">
                                    <li>• Test in different lighting conditions</li>
                                    <li>• Verify face tracking accuracy</li>
                                    <li>• Check model alignment and scaling</li>
                                    <li>• Test on various devices and browsers</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // AR Analytics Component
        const ARAnalytics = () => {
            const [analyticsData] = useState({
                overview: {
                    totalSessions: 3847,
                    avgSessionDuration: 45.2,
                    conversionRate: 18.5,
                    topPerformingModel: 'Beet Tinted Balm - Berry'
                },
                sessionTrends: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    sessions: [120, 195, 240, 180, 290, 410, 380],
                    conversions: [22, 36, 44, 33, 54, 76, 70]
                },
                deviceBreakdown: {
                    'Mobile': 68,
                    'Desktop': 22,
                    'Tablet': 10
                },
                browserCompatibility: {
                    'Chrome': 85,
                    'Safari': 12,
                    'Firefox': 2,
                    'Other': 1
                }
            });

            const chartRef = useRef(null);
            const deviceChartRef = useRef(null);

            useEffect(() => {
                // Session Trends Chart
                if (chartRef.current) {
                    const ctx = chartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: analyticsData.sessionTrends.labels,
                            datasets: [
                                {
                                    label: 'AR Sessions',
                                    data: analyticsData.sessionTrends.sessions,
                                    borderColor: '#228B22',
                                    backgroundColor: 'rgba(34, 139, 34, 0.1)',
                                    tension: 0.4,
                                    yAxisID: 'y'
                                },
                                {
                                    label: 'Conversions',
                                    data: analyticsData.sessionTrends.conversions,
                                    borderColor: '#3B82F6',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    tension: 0.4,
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'AR Sessions'
                                    }
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    title: {
                                        display: true,
                                        text: 'Conversions'
                                    },
                                    grid: {
                                        drawOnChartArea: false,
                                    },
                                }
                            }
                        }
                    });
                }

                // Device Breakdown Chart
                if (deviceChartRef.current) {
                    const ctx = deviceChartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: Object.keys(analyticsData.deviceBreakdown),
                            datasets: [{
                                data: Object.values(analyticsData.deviceBreakdown),
                                backgroundColor: [
                                    '#228B22',
                                    '#3B82F6',
                                    '#8B5CF6'
                                ]
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'bottom'
                                }
                            }
                        }
                    });
                }
            }, []);

            return (
                <div className="space-y-6">
                    {/* Key Metrics */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm font-medium text-gray-600">Total AR Sessions</p>
                                    <p className="text-2xl font-bold text-gray-900">{analyticsData.overview.totalSessions.toLocaleString()}</p>
                                </div>
                                <div className="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <i className="fas fa-vr-cardboard text-purple-600"></i>
                                </div>
                            </div>
                            <p className="text-green-600 text-sm mt-2">
                                <i className="fas fa-arrow-up mr-1"></i>+25% from last week
                            </p>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm font-medium text-gray-600">Avg Session Duration</p>
                                    <p className="text-2xl font-bold text-gray-900">{analyticsData.overview.avgSessionDuration}s</p>
                                </div>
                                <div className="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i className="fas fa-clock text-blue-600"></i>
                                </div>
                            </div>
                            <p className="text-green-600 text-sm mt-2">
                                <i className="fas fa-arrow-up mr-1"></i>+8% engagement
                            </p>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm font-medium text-gray-600">AR Conversion Rate</p>
                                    <p className="text-2xl font-bold text-gray-900">{analyticsData.overview.conversionRate}%</p>
                                </div>
                                <div className="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <i className="fas fa-shopping-cart text-green-600"></i>
                                </div>
                            </div>
                            <p className="text-green-600 text-sm mt-2">
                                <i className="fas fa-arrow-up mr-1"></i>Above 15% target
                            </p>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <div className="flex items-center justify-between">
                                <div>
                                    <p className="text-sm font-medium text-gray-600">Top Model</p>
                                    <p className="text-lg font-bold text-gray-900">{analyticsData.overview.topPerformingModel}</p>
                                </div>
                                <div className="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <i className="fas fa-trophy text-orange-600"></i>
                                </div>
                            </div>
                            <p className="text-green-600 text-sm mt-2">
                                <i className="fas fa-star mr-1"></i>203 sessions
                            </p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {/* Session Trends */}
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">AR Session Trends</h3>
                            <canvas ref={chartRef} width="400" height="200"></canvas>
                        </div>

                        {/* Device Breakdown */}
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Device Usage</h3>
                            <canvas ref={deviceChartRef} width="400" height="200"></canvas>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        {/* Browser Compatibility */}
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Browser Compatibility</h3>
                            <div className="space-y-4">
                                {Object.entries(analyticsData.browserCompatibility)
                                    .sort(([,a], [,b]) => b - a)
                                    .map(([browser, percentage]) => (
                                    <div key={browser} className="flex items-center justify-between">
                                        <div className="flex items-center">
                                            <i className={`fab fa-${browser.toLowerCase()} text-xl mr-3 ${
                                                browser === 'Chrome' ? 'text-yellow-500' :
                                                browser === 'Safari' ? 'text-blue-500' :
                                                browser === 'Firefox' ? 'text-orange-500' :
                                                'text-gray-500'
                                            }`}></i>
                                            <span className="text-gray-700">{browser}</span>
                                        </div>
                                        <div className="flex items-center space-x-3 flex-1 ml-4">
                                            <div className="flex-1 bg-gray-200 rounded-full h-2">
                                                <div 
                                                    className="bg-green-600 h-2 rounded-full transition-all duration-300" 
                                                    style={{width: `${percentage}%`}}
                                                ></div>
                                            </div>
                                            <span className="text-sm font-medium text-gray-600 w-8">{percentage}%</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Performance Issues */}
                        <div className="bg-white rounded-lg shadow-sm p-6">
                            <h3 className="text-lg font-semibold text-gray-800 mb-4">Performance Issues</h3>
                            <div className="space-y-4">
                                <div className="p-4 bg-red-50 rounded-lg">
                                    <div className="flex items-center mb-2">
                                        <i className="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                                        <span className="font-medium text-red-800">Camera Permission Denied</span>
                                    </div>
                                    <p className="text-red-700 text-sm">12% of users deny camera access</p>
                                </div>
                                
                                <div className="p-4 bg-yellow-50 rounded-lg">
                                    <div className="flex items-center mb-2">
                                        <i className="fas fa-mobile-alt text-yellow-600 mr-2"></i>
                                        <span className="font-medium text-yellow-800">Low-End Device Performance</span>
                                    </div>
                                    <p className="text-yellow-700 text-sm">8% experience frame rate drops</p>
                                </div>
                                
                                <div className="p-4 bg-blue-50 rounded-lg">
                                    <div className="flex items-center mb-2">
                                        <i className="fas fa-wifi text-blue-600 mr-2"></i>
                                        <span className="font-medium text-blue-800">Slow Network Loading</span>
                                    </div>
                                    <p className="text-blue-700 text-sm">5% timeout during model loading</p>
                                </div>
                                
                                <div className="p-4 bg-green-50 rounded-lg">
                                    <div className="flex items-center mb-2">
                                        <i className="fas fa-check-circle text-green-600 mr-2"></i>
                                        <span className="font-medium text-green-800">Overall Health</span>
                                    </div>
                                    <p className="text-green-700 text-sm">75% of sessions complete successfully</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Main AR Integration Component
        const ARIntegration = () => {
            const [activeTab, setActiveTab] = useState('models');

            const tabs = [
                { id: 'models', label: '3D Models', icon: 'fas fa-cube' },
                { id: 'preview', label: 'AR Preview', icon: 'fas fa-camera' },
                { id: 'analytics', label: 'AR Analytics', icon: 'fas fa-chart-bar' }
            ];

            return (
                <div className="min-h-screen bg-gray-50 p-6">
                    <div className="mb-8">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">AR Integration</h1>
                        <p className="text-gray-600">Manage augmented reality features and virtual try-on experiences</p>
                    </div>

                    {/* Tab Navigation */}
                    <div className="border-b border-gray-200 mb-8">
                        <nav className="-mb-px flex space-x-8">
                            {tabs.map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${
                                        activeTab === tab.id
                                            ? 'border-green-500 text-green-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                    }`}
                                >
                                    <i className={`${tab.icon} mr-2`}></i>
                                    {tab.label}
                                </button>
                            ))}
                        </nav>
                    </div>

                    {/* Tab Content */}
                    <div>
                        {activeTab === 'models' && <ModelManager />}
                        {activeTab === 'preview' && <ARPreview />}
                        {activeTab === 'analytics' && <ARAnalytics />}
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<ARIntegration />, document.getElementById('ar-integration-app'));
    </script>
</body>
</html>